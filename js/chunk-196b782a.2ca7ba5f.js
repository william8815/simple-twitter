(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-196b782a"],{"28c6":function(s,t,o){"use strict";o("9004")},9004:function(s,t,o){},d13f:function(s,t,o){"use strict";o.r(t);var e=function(){var s=this,t=s._self._c;return t("div",{staticClass:"container row"},[t("section",{staticClass:"col-2",staticStyle:{"min-width":"176px"}},[t("Navbar")],1),t("section",{staticClass:"col-7 follower-section"},[t("div",{staticClass:"follow"},[t("div",{staticClass:"follow-head"},[t("div",{staticClass:"title"},[t("i",{staticClass:"back fa-solid fa-arrow-left",on:{click:function(t){return s.$router.back()}}}),t("div",[t("h5",[s._v(s._s(s.user.name))]),t("span",[s._v(s._s(s.user.tweetsCount)+" 貼文")])])]),t("div",{staticClass:"follow-tabs"},[t("ul",{staticClass:"tabs-list"},[t("li",[t("router-link",{staticClass:"tab followers",attrs:{to:{name:"followers"}}},[s._v(" 追隨者 ")])],1),t("li",[t("router-link",{staticClass:"tab following",attrs:{to:{name:"following"}}},[s._v(" 正在追隨 ")])],1)])])]),s.isLoading?t("Spinner"):t("div",{staticClass:"follow-list"},[t("ul",s._l(s.followers,(function(o){return t("li",{key:o.followerId,staticClass:"list-item"},[t("router-link",{staticClass:"avator",attrs:{to:{name:"user-post",params:{id:o.followerId}}}},[t("img",{attrs:{src:s._f("emptyImage")(o.followerAvatar),alt:"userImg"}})]),t("div",{staticClass:"user"},[t("div",{staticClass:"user__info"},[t("router-link",{attrs:{to:{name:"user-post",params:{id:o.followerId}}}},[t("span",{staticClass:"user__name"},[s._v(s._s(o.followerName))])]),o.isFollower?t("button",{staticClass:"btn followed-btn",attrs:{disabled:s.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),s.deleteFollow(o.followerId)}}},[s._v(" 正在跟隨 ")]):t("button",{staticClass:"btn follow-btn",attrs:{disabled:s.isProcessing},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),s.addFollow(o.followerId)}}},[s._v(" 跟隨 ")])],1),t("div",{staticClass:"user__post"},[s._v(" "+s._s(o.followerIntroduction)+" ")])])],1)})),0)])],1)]),t("section",{staticClass:"col-3",staticStyle:{"min-width":"274px"}},[t("RecommendUsers")],1)])},i=[],l=(o("d9e2"),o("d178")),a=o("88fd"),r=o("2375"),c=o("4cce"),n=o("2fa3"),f=o("2708"),d=o("2f62"),w={name:"Followers",mixins:[f["b"]],components:{Navbar:l["a"],RecommendUsers:a["a"],Spinner:r["a"]},data(){return{followers:[],user:{},isProcessing:!1,isLoading:!1}},computed:{...Object(d["b"])(["currentUser"])},beforeRouteUpdate(s,t,o){const{id:e}=s.params;this.fetchUser(e),this.fetchFollower(e),o()},created(){const{id:s}=this.$route.params;this.fetchUser(s),this.fetchFollower(s)},methods:{async fetchUser(s){const{data:t}=await c["a"].getOtherUser(s),{name:o,tweetsCount:e}=t;this.user={name:o,tweetsCount:e}},async fetchFollower(s){try{this.isLoading=!0;const{data:t}=await c["a"].getUserFollowers(s);this.followers=t,console.log(this.followers),this.isLoading=!1}catch(t){this.isLoading=!1,console.log(t),n["c"].fire({icon:"error",title:"請求粉絲用戶失敗"})}},async addFollow(s){try{this.isProcessing=!0;const{data:t}=await c["a"].addFollowing(s);if("success"!==t.status)throw new Error(t.message);this.followers=this.followers.map(t=>t.followerId===s?{...t,isFollower:!0}:t),n["c"].fire({icon:"success",title:"成功追蹤用戶"}),this.isProcessing=!1}catch(t){this.isProcessing=!1,console.log(t),n["c"].fire({icon:"error",title:"追蹤用戶失敗"})}},async deleteFollow(s){try{this.isProcessing=!0;const{data:t}=await c["a"].deleteFollowing(s);if("success"!==t.status)throw new Error(t.message);this.followers=this.followers.map(t=>t.followerId===s?{...t,isFollower:!1}:t),n["c"].fire({icon:"success",title:"取消追蹤用戶"}),this.isProcessing=!1}catch(t){this.isProcessing=!1,console.log(t),n["c"].fire({icon:"error",title:"追蹤用戶失敗"})}}}},u=w,h=(o("28c6"),o("2877")),m=Object(h["a"])(u,e,i,!1,null,"f0b0fedc",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-196b782a.2ca7ba5f.js.map