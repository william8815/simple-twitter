(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d544776"],{"0065":function(t,s,e){"use strict";e("cb25")},3734:function(t,s,e){t.exports=e.p+"img/userImg.289466ac.png"},"376a":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container row"},[s("section",{staticClass:"col-2",staticStyle:{"min-width":"176px"}},[s("Navbar")],1),s("section",{staticClass:"set-section col-7"},[s("div",{staticClass:"main"},[t._m(0),s("div",{staticClass:"main__body"},[s("AccountEditForm",{attrs:{isAccountError:t.isAccountError,isEmailError:t.isEmailError,"initial-isProcessing":t.isProcessing},on:{"handle-after-submit":t.handleAfterSubmit,"status-change":t.statusChange}})],1)])])])},r=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"main__title"},[s("h1",[t._v("帳戶設定")])])}],i=function(){var t=this,s=t._self._c;return s("form",{staticClass:"form",attrs:{action:""},on:{submit:function(s){return s.stopPropagation(),s.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("div",{staticClass:"form__label"},[s("label",{attrs:{for:"account"}},[t._v("帳號")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.account,expression:"user.account"}],staticClass:"label__control",class:{error:t.isAccountError},attrs:{type:"text",name:"account",id:"account",placeholder:"請輸入帳號"},domProps:{value:t.user.account},on:{input:function(s){s.target.composing||t.$set(t.user,"account",s.target.value)}}}),s("div",{staticClass:"inputInfo"},[s("div",{staticClass:"errorInfo"},[t.isAccountError?s("span",{attrs:{id:"info"}},[t._v("帳號重複 , 請修改 帳號")]):t._e()])])]),s("div",{staticClass:"form__label"},[s("label",{attrs:{for:"name"}},[t._v("名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"label__control",class:{error:this.user.name.length>50},attrs:{type:"text",name:"name",id:"name",placeholder:"請輸入名稱",maxlength:"51"},domProps:{value:t.user.name},on:{input:function(s){s.target.composing||t.$set(t.user,"name",s.target.value)}}}),s("div",{staticClass:"inputInfo"},[s("div",{staticClass:"errorInfo"},[this.user.name.length>50?s("span",{attrs:{id:"info"}},[t._v("名稱字數上限 50 ")]):t._e()]),s("div",{staticClass:"lenghtInfo"},[s("span",{attrs:{id:"length"}},[t._v(t._s(t.nameLength)+" / 50")])])])]),s("div",{staticClass:"form__label"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"label__control",class:{error:t.isEmailError},attrs:{type:"email",name:"email",id:"email",placeholder:"請輸入email"},domProps:{value:t.user.email},on:{input:function(s){s.target.composing||t.$set(t.user,"email",s.target.value)}}}),s("div",{staticClass:"inputInfo"},[s("div",{staticClass:"errorInfo"},[t.isEmailError?s("span",{attrs:{id:"info"}},[t._v("e-mail重複 , 請修改 e-mail")]):t._e()])])]),s("div",{staticClass:"form__label"},[s("label",{attrs:{for:"password"}},[t._v("密碼")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"label__control",attrs:{type:"password",name:"password",id:"password",placeholder:"請輸入密碼"},domProps:{value:t.user.password},on:{input:function(s){s.target.composing||t.$set(t.user,"password",s.target.value)}}})]),s("div",{staticClass:"form__label"},[s("label",{attrs:{for:"checkPassword"}},[t._v("密碼確認")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.checkPassword,expression:"user.checkPassword"}],staticClass:"label__control",attrs:{type:"password",name:"checkPassword",id:"passwordCheck",placeholder:"請再次輸入密碼"},domProps:{value:t.user.checkPassword},on:{input:function(s){s.target.composing||t.$set(t.user,"checkPassword",s.target.value)}}})]),t._m(0)])},o=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"form__btn"},[s("button",{staticClass:"btn submit",attrs:{type:"submit"}},[t._v("儲存")])])}],n=e("2f62"),c=e("2fa3"),l={name:"AccountEditForm",props:{isAccountError:{type:Boolean,default:!1},isEmailError:{type:Boolean,default:!1},initialIsProcessing:{type:Boolean,default:!1}},data(){return{user:{name:"",account:"",email:"",password:"",checkPassword:""}}},watch:{currentUser(t){this.fetchUser(t)},"user.account":function(){this.$emit("status-change")},"user.email":function(){this.$emit("status-change")}},created(){this.fetchUser(this.currentUser)},methods:{fetchUser(t){const{account:s,name:e,email:a}=t;this.user={...this.user,account:s,name:e,email:a}},async handleSubmit(){try{if(this.isProcessing=!0,this.user.name&&this.user.name.length>50)return void c["c"].fire({icon:"warning",title:"名稱字數不能超過 50 "});if(this.user.password&&this.user.password.length<4)return c["c"].fire({icon:"warning",title:"密碼長度不得小於 4 "}),this.user.password="",void(this.user.checkPassword="");if(this.user.password&&this.user.password!==this.user.checkPassword)return c["c"].fire({icon:"warning",title:"兩次輸入的密碼不同"}),this.user.password="",void(this.user.checkPassword="");const t=this.user;this.$emit("handle-after-submit",t)}catch(t){console.error(t)}}},computed:{...Object(n["b"])(["currentUser"]),nameLength(){return this.user.name.length}}},u=l,d=(e("0065"),e("2877")),m=Object(d["a"])(u,i,o,!1,null,"1cff88d9",null),f=m.exports,C=e("d178"),h=e("4cce"),p={name:"AccountEdit",components:{AccountEditForm:f,Navbar:C["a"]},data(){return{isAccountError:!1,isEmailError:!1,isProcessing:!1}},methods:{async handleAfterSubmit(t){try{const s=this.$route.params.id,{data:e}=await h["a"].editUser(s,{name:t.name,account:t.account,email:t.email,password:t.password,checkPassword:t.checkPassword});c["c"].fire({icon:"success",title:e.message}),this.$store.commit("setCurrentUser",e.newData),this.$router.push("/main")}catch(s){if("帳號已被使用！"===s.response.data.message)return void(this.isAccountError=!0);if("電子信箱已被使用！"===s.response.data.message)return void(this.isEmailError=!0);c["c"].fire({icon:"warning",title:s.response.data.message})}},statusChange(){this.isAccountError=!1,this.isEmailError=!1}}},v=p,w=(e("f55a"),Object(d["a"])(v,a,r,!1,null,"5ff56427",null));s["default"]=w.exports},"422b":function(t,s,e){"use strict";e("6d53")},"6d53":function(t,s,e){},7482:function(t,s,e){"use strict";var a=e("2fa3");s["a"]={getTweets({limit:t}){const s=new URLSearchParams({limit:t});return a["d"].get("/tweets?"+s.toString())},getUserTweet(t){return a["d"].get("/tweets/"+t)},getUserComments(t){return a["d"].get(`/tweets/${t}/replies`)},addNewComment({tweetId:t,comment:s}){return a["d"].post(`/tweets/${t}/replies`,{comment:s})},addTweetLike(t){return a["d"].post(`/tweets/${t}/like`)},cancelTweetLike(t){return a["d"].post(`/tweets/${t}/unlike`)},addTweet({description:t}){return a["d"].post("/tweets",{description:t})}}},bf06:function(t,s,e){},cb25:function(t,s,e){},d178:function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"navbar"},[s("nav",{staticClass:"navtabs"},[s("div",{staticClass:"navtabs__logo"}),t.isAdmin?s("div",{staticClass:"navtabs__list"},[s("ul",{staticClass:"list"},[s("li",[s("router-link",{staticClass:"tag",attrs:{to:{name:"admin-post"}}},[s("svg",{staticClass:"icon",class:{focus:"admin-post"===t.$route.name},attrs:{viewBox:"0 0 24 24",fill:"#fff",stroke:"#44444F","stroke-width":"2px",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{class:{focus:"admin-post"===t.$route.name},attrs:{d:"M22.58 7.34986L12.475 1.89686C12.178 1.73686 11.821 1.73686 11.525 1.89686L1.42496 7.34986C0.938957 7.61386 0.757957 8.21986 1.01996 8.70586C1.19996 9.04086 1.54496 9.23086 1.89996 9.23086C2.05996 9.23086 2.22396 9.19286 2.37496 9.11086L3.10896 8.71486L4.69896 19.9649C4.91496 21.1789 6.00896 22.0269 7.35896 22.0269H16.641C17.991 22.0269 19.085 21.1789 19.303 19.9389L20.891 8.71386L21.628 9.11186C22.113 9.37486 22.72 9.19386 22.982 8.70786C23.245 8.22186 23.062 7.61486 22.578 7.35286L22.58 7.34986ZM12 15.4349C10.205 15.4349 8.74996 13.9799 8.74996 12.1849C8.74996 10.3899 10.205 8.93486 12 8.93486C13.795 8.93486 15.25 10.3899 15.25 12.1849C15.25 13.9799 13.795 15.4349 12 15.4349Z",fill:"#fff"}})]),s("h5",{class:{focus:"admin-post"===t.$route.name}},[t._v("推文清單")])])],1),s("li",[s("router-link",{staticClass:"tag",attrs:{to:{name:"admin-users"}}},[s("svg",{staticClass:"icon",class:{focus:"admin-users"===t.$route.name},attrs:{viewBox:"0 0 24 24",fill:"#fff",stroke:"#44444F","stroke-width":"2px",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{class:{focus:"admin-users"===t.$route.name},attrs:{d:"M12.225 12.1649C10.869 12.1649 9.35301 12.0149 8.38501 10.9089C7.57101 9.97891 7.30801 8.54091 7.58001 6.51691C7.96001 3.69091 9.69601 2.00391 12.226 2.00391C14.756 2.00391 16.493 3.69091 16.872 6.51691C17.144 8.54091 16.88 9.97691 16.066 10.9089C15.096 12.0149 13.581 12.1639 12.226 12.1639L12.225 12.1649ZM18.074 22.0149H6.37601C5.71301 22.0149 5.12601 21.7349 4.72601 21.2289C4.30401 20.6949 4.15001 19.9589 4.31601 19.2609C5.15001 15.7309 8.40201 13.2639 12.224 13.2639C16.046 13.2639 19.298 15.7299 20.134 19.2609C20.298 19.9589 20.144 20.6949 19.722 21.2279C19.322 21.7329 18.737 22.0129 18.074 22.0129V22.0149Z",fill:"#fff"}})]),s("h5",{class:{focus:"admin-users"===t.$route.name}},[t._v(" 使用者列表 ")])])],1)])]):s("div",{staticClass:"navtabs__list"},[s("ul",{staticClass:"list"},[s("li",[s("router-link",{staticClass:"tag",attrs:{to:{name:"main"}}},[s("svg",{staticClass:"icon",class:{focus:"main"===t.$route.name},attrs:{viewBox:"0 0 24 24",fill:"#fff",stroke:"#44444F","stroke-width":"2px",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{class:{focus:"main"===t.$route.name},attrs:{d:"M22.58 7.34986L12.475 1.89686C12.178 1.73686 11.821 1.73686 11.525 1.89686L1.42496 7.34986C0.938957 7.61386 0.757957 8.21986 1.01996 8.70586C1.19996 9.04086 1.54496 9.23086 1.89996 9.23086C2.05996 9.23086 2.22396 9.19286 2.37496 9.11086L3.10896 8.71486L4.69896 19.9649C4.91496 21.1789 6.00896 22.0269 7.35896 22.0269H16.641C17.991 22.0269 19.085 21.1789 19.303 19.9389L20.891 8.71386L21.628 9.11186C22.113 9.37486 22.72 9.19386 22.982 8.70786C23.245 8.22186 23.062 7.61486 22.578 7.35286L22.58 7.34986ZM12 15.4349C10.205 15.4349 8.74996 13.9799 8.74996 12.1849C8.74996 10.3899 10.205 8.93486 12 8.93486C13.795 8.93486 15.25 10.3899 15.25 12.1849C15.25 13.9799 13.795 15.4349 12 15.4349Z",fill:"#fff"}})]),s("h5",{class:{focus:"main"===t.$route.name}},[t._v("首頁")])])],1),s("li",[s("router-link",{staticClass:"tag",attrs:{to:{name:"user-post",params:{id:t.currentUser.id}}}},[s("svg",{staticClass:"icon",class:{focus:"user-post"===t.$route.name},attrs:{viewBox:"0 0 24 24",fill:"#fff",stroke:"#44444F","stroke-width":"2px",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{class:{focus:"user-post"===t.$route.name},attrs:{d:"M12.225 12.1649C10.869 12.1649 9.35301 12.0149 8.38501 10.9089C7.57101 9.97891 7.30801 8.54091 7.58001 6.51691C7.96001 3.69091 9.69601 2.00391 12.226 2.00391C14.756 2.00391 16.493 3.69091 16.872 6.51691C17.144 8.54091 16.88 9.97691 16.066 10.9089C15.096 12.0149 13.581 12.1639 12.226 12.1639L12.225 12.1649ZM18.074 22.0149H6.37601C5.71301 22.0149 5.12601 21.7349 4.72601 21.2289C4.30401 20.6949 4.15001 19.9589 4.31601 19.2609C5.15001 15.7309 8.40201 13.2639 12.224 13.2639C16.046 13.2639 19.298 15.7299 20.134 19.2609C20.298 19.9589 20.144 20.6949 19.722 21.2279C19.322 21.7329 18.737 22.0129 18.074 22.0129V22.0149Z",fill:"#fff"}})]),s("h5",{class:{focus:"user-post"===t.$route.name}},[t._v("個人資料")])])],1),s("li",[s("router-link",{staticClass:"tag",attrs:{to:{name:"user-edit",params:{id:t.currentUser.id}}}},[s("svg",{staticClass:"icon",class:{focus:"user-edit"===t.$route.name},attrs:{viewBox:"0 0 24 24",fill:"#fff",stroke:"#44444F","stroke-width":"2px",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{class:{focus:"user-edit"===t.$route.name},attrs:{d:"M12.36 22.375H11.638C10.455 22.375 9.48405 21.487 9.37605 20.311L9.36205 20.164C9.33705 19.877 9.15505 19.631 8.89005 19.52C8.60405 19.4 8.30805 19.455 8.09205 19.635L7.97605 19.732C7.10805 20.457 5.72305 20.395 4.91605 19.592L4.40605 19.082C3.57005 18.242 3.51005 16.928 4.26605 16.022L4.36405 15.904C4.55005 15.682 4.59405 15.381 4.48605 15.117C4.37605 14.845 4.12805 14.663 3.84005 14.637L3.69005 14.623C2.51005 14.516 1.62305 13.543 1.62305 12.361V11.639C1.62305 10.456 2.51105 9.485 3.68705 9.377L3.84305 9.363C4.12805 9.338 4.37305 9.156 4.48505 8.89C4.59505 8.62 4.55005 8.317 4.36505 8.095L4.27105 7.979C3.51405 7.071 3.57305 5.756 4.40805 4.919L4.92005 4.407C5.72405 3.603 7.10805 3.542 7.98005 4.267L8.09605 4.365C8.31405 4.549 8.62405 4.595 8.88605 4.487C9.15605 4.375 9.33805 4.129 9.36305 3.844L9.37705 3.691C9.48405 2.511 10.457 1.625 11.639 1.625H12.361C13.544 1.625 14.515 2.513 14.623 3.689L14.637 3.845C14.662 4.13 14.843 4.375 15.109 4.485C15.386 4.602 15.689 4.547 15.903 4.368L16.023 4.266C16.89 3.543 18.277 3.604 19.083 4.406L19.593 4.918C20.429 5.756 20.489 7.071 19.733 7.978L19.633 8.096C19.445 8.316 19.399 8.618 19.51 8.884C19.622 9.154 19.87 9.334 20.156 9.362L20.308 9.376C21.488 9.483 22.375 10.456 22.375 11.638V12.361C22.375 13.544 21.487 14.515 20.311 14.623L20.156 14.637C19.872 14.661 19.626 14.842 19.516 15.107C19.403 15.379 19.449 15.681 19.633 15.902L19.733 16.022C20.489 16.927 20.429 18.242 19.593 19.082L19.083 19.592C18.276 20.396 16.893 20.456 16.023 19.732L15.908 19.636C15.691 19.453 15.378 19.406 15.118 19.514C14.845 19.628 14.663 19.874 14.638 20.16L14.624 20.31C14.517 21.483 13.544 22.37 12.362 22.37L12.36 22.375ZM8.20996 12C8.20996 9.90996 9.90996 8.20996 12 8.20996C14.09 8.20996 15.79 9.90996 15.79 12C15.79 14.09 14.09 15.79 12 15.79C9.90996 15.79 8.20996 14.09 8.20996 12ZM9.70996 12C9.70996 13.264 10.738 14.29 12 14.29C13.262 14.29 14.29 13.264 14.29 12C14.29 10.736 13.26 9.70996 12 9.70996C10.74 9.70996 9.70996 10.736 9.70996 12Z",fill:"#fff"}})]),s("h5",{class:{focus:"user-edit"===t.$route.name}},[t._v("設定")])])],1)]),s("button",{staticClass:"navtabs__btn",on:{click:t.newlModel}},[t._v("推文")])]),s("div",[t.tweetMode?s("div",{staticClass:"black",on:{click:t.cancelModel}}):t._e()]),t.tweetMode?s("div",{staticClass:"tweetModal"},[s("div",{staticClass:"modal"},[s("div",{staticClass:"cancel"},[s("i",{staticClass:"fa-solid fa-xmark",on:{click:t.cancelModel}})]),s("div",{staticClass:"tweet"},[s("img",{attrs:{src:e("3734"),alt:"userImg"}}),s("form",{attrs:{action:""},on:{submit:function(s){return s.stopPropagation(),s.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[s("div",{attrs:{id:"parent"}},[s("div",{attrs:{id:"dummy"}},[t._v(t._s(t.text))]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"textarea",staticClass:"tweet-content",attrs:{name:"tweet",id:"",cols:"30",rows:"7",placeholder:"有甚麼新鮮事?"},domProps:{value:t.text},on:{input:function(s){s.target.composing||(t.text=s.target.value)}}})]),s("div",{staticClass:"tweet-footer"},[t.text.length>140?s("span",{staticClass:"alertWord"},[t._v("已超過 140 個字")]):t._e(),s("span",{class:{red:t.text.length>140}},[t._v(t._s(t.countLength)+"/140")]),s("button",{staticClass:"tweet-btn",attrs:{type:"submit",disabled:t.isProcessing}},[t._v(" 推文 ")])])])])])]):t._e()]),s("div",{staticClass:"logout"},[s("a",{attrs:{href:"#"},on:{click:t.logout}},[s("i",{staticClass:"fa-solid fa-arrow-right-from-bracket"}),s("span",[t._v("登出")])])])])},r=[],i=(e("d9e2"),e("7482")),o=e("2fa3"),n=e("2f62"),c={data(){return{text:"",count:7,tweetMode:!1,isAdmin:!1,isProcessing:!1,routerName:""}},computed:{...Object(n["b"])(["currentUser"]),countLength(){return this.text.length}},methods:{fetchRoute(){this.routerName=this.$route.name},cancelModel(){this.tweetMode=!1},newlModel(){this.tweetMode=!0},logout(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")},async handleSubmit(){if(""!==this.text.trim())if(this.text.length>140)o["c"].fire({icon:"error",title:"推文字數超過 140 個字"});else try{this.isProcessing=!0;const{data:t}=await i["a"].addTweet({description:this.text});if("success"!==t.status)throw new Error(t.message);this.$emit("submit-tweet",{description:this.text}),this.text="",this.cancelModel(),o["c"].fire({icon:"success",title:"成功新增一則貼文"}),this.isProcessing=!1}catch(t){this.isProcessing=!1,o["c"].fire({icon:"error",title:"新增貼文失敗"})}else o["c"].fire({icon:"error",title:"推文內容請勿空白"})}}},l=c,u=(e("422b"),e("2877")),d=Object(u["a"])(l,a,r,!1,null,"d09cef06",null);s["a"]=d.exports},f55a:function(t,s,e){"use strict";e("bf06")}}]);
//# sourceMappingURL=chunk-4d544776.ac92d12c.js.map