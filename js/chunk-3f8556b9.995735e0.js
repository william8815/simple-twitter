(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f8556b9"],{"186a":function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"adminSidbar"},[e("div",{staticClass:"nav__brand"},[e("router-link",{attrs:{to:"/login"}},[e("img",{attrs:{src:s("1ae4"),alt:""}})])],1),e("div",{staticClass:"nav__list"},[e("div",{staticClass:"nav__row"},[e("div",{staticClass:"row__icon"},[t.isTweetsView?e("img",{attrs:{src:s("f340"),alt:""}}):e("img",{attrs:{src:s("e3e6"),alt:""}})]),e("div",{staticClass:"row__title"},[e("router-link",{attrs:{to:"/admin/post"}},[e("p",{class:{active:t.isTweetsView}},[t._v("推文清單")])])],1)]),e("div",{staticClass:"nav__row"},[e("div",{staticClass:"row__icon"},[t.isUsersView?e("img",{attrs:{src:s("f05f"),alt:""}}):e("img",{attrs:{src:s("2efd"),alt:""}})]),e("div",{staticClass:"row__title"},[e("router-link",{attrs:{to:"/admin/users"}},[e("p",{class:{active:t.isUsersView}},[t._v("使用者列表")])])],1)])]),e("div",{staticClass:"nav__row",attrs:{id:"signOut"}},[t._m(0),e("button",{staticClass:"row__title",attrs:{type:"button"},on:{click:t.logout}},[t._v("登出")])])])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"row__icon out__icon"},[e("img",{attrs:{src:s("bb87"),alt:""}})])}],r={name:"AdminSidbar",data(){return{isTweetsView:!1,isUsersView:!1}},created(){const t=this.$route.path.split("/")[2];this.setCurrentLocation(t)},methods:{setCurrentLocation(t){"post"===t?(this.isTweetsView=!0,this.isUsersView=!1):(this.isTweetsView=!1,this.isUsersView=!0)},logout(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")}}},n=r,o=(s("cbed"),s("2877")),c=Object(o["a"])(n,i,a,!1,null,"72921720",null);e["a"]=c.exports},"26a0":function(t,e,s){t.exports=s.p+"img/delete.50784a82.svg"},"2efd":function(t,e,s){t.exports=s.p+"img/profile.859481f6.svg"},"4c2d":function(t,e,s){"use strict";s("7943")},7943:function(t,e,s){},"8ba4":function(t,e,s){},"8c4e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"adminUsers"},[e("AdminSidbar"),e("div",{staticClass:"main"},[t._m(0),t.isLoading?e("Spinner"):[e("div",{staticClass:"main__body"},t._l(t.tweets,(function(s){return e("AdminTweetsList",{key:s.id,attrs:{"tweet-info":s},on:{"after-delete-tweet":t.afterDeleteTweet}})})),1)]],2)],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__title"},[e("h1",[t._v("推文清單")])])}],r=(s("d9e2"),s("2fa3")),n=s("be6c"),o=s("186a"),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"tweets__list"},[e("div",{staticClass:"list__avast"},[e("img",{attrs:{src:t.tweet.User.avatar,alt:""}})]),e("div",{staticClass:"list__info"},[e("div",{staticClass:"info__title"},[e("div",{staticClass:"title__name"},[t._v(t._s(t.tweet.User.name))]),e("div",{staticClass:"title__date"},[t._v(" @"+t._s(t.tweet.User.text)+" ‧ "+t._s(t._f("fromNow")(t.tweet.createdAt))+" ")])]),e("p",[t._v(" "+t._s(t._f("tweetFilter")(t.tweet.description))+" ")])]),e("div",{staticClass:"list__icon"},[e("img",{attrs:{src:s("26a0"),alt:""},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.handleDeleteButton(t.tweet.id)}}})])])},d=[],l=s("2708"),u={name:"AdminTweetsList",mixins:[l["c"]],props:{tweetInfo:{type:Object,required:!0}},data(){return{tweet:{id:-1,description:"",createdAt:"",updatedAt:"",User:{id:-1,name:"user1",text:"",avatar:null}}}},methods:{async handleDeleteButton(t){r["a"].fire().then(e=>{console.log(e),e.isConfirmed&&this.$emit("after-delete-tweet",t)})},fetchTweet(){const{id:t,description:e,createdAt:s,updatedAt:i,User:a}=this.tweetInfo,{name:r,text:n,avatar:o}=a;this.tweet={id:t,description:e,createdAt:s,updatedAt:i,User:{name:r,text:n||"apple",avatar:o||"https://imgur.com/2P4VlXI.png"}}}},created(){this.fetchTweet()},filters:{tweetFilter(t){return t.length>50?t.slice(0,50)+" ......":t}}},f=u,w=(s("4c2d"),s("2877")),_=Object(w["a"])(f,c,d,!1,null,"68e0da8c",null),v=_.exports,m=s("2375"),p={name:"AdminPost",components:{AdminSidbar:o["a"],AdminTweetsList:v,Spinner:m["a"]},data(){return{tweets:{},isLoading:!0}},methods:{async fetchTweets(){try{this.isLoading=!0;const{data:t}=await n["a"].getTweets();if("error"===t.statu)throw new Error(t.message);this.tweets=t,this.isLoading=!1}catch(t){this.isLoading=!1,r["c"].fire({icon:"error",title:t.response.data.message})}},async afterDeleteTweet(t){try{const{data:e}=await n["a"].deleteTweet({tweetId:t});if("error"===e.statu)throw new Error(e.message);this.tweets=this.tweets.filter(e=>e.id!==t),r["b"].fire()}catch(e){r["c"].fire({icon:"error",title:e.response.data.message})}}},created(){this.fetchTweets()}},h=p,g=(s("f805"),Object(w["a"])(h,i,a,!1,null,"55f00e5b",null));e["default"]=g.exports},9450:function(t,e,s){},bb87:function(t,e,s){t.exports=s.p+"img/Vectoroutlog.989fb49b.svg"},be6c:function(t,e,s){"use strict";var i=s("2fa3");e["a"]={getTweets(){return i["d"].get("/tweets")},getUsers(){return i["d"].get("/admin/users")},deleteTweet({tweetId:t}){return i["d"].delete("/admin/tweets/"+t)}}},cbed:function(t,e,s){"use strict";s("8ba4")},e3e6:function(t,e,s){t.exports=s.p+"img/home.f6b62b09.svg"},f05f:function(t,e,s){t.exports=s.p+"img/profile@active.e49ffad4.svg"},f340:function(t,e,s){t.exports=s.p+"img/home@active.55c27aab.svg"},f805:function(t,e,s){"use strict";s("9450")}}]);
//# sourceMappingURL=chunk-3f8556b9.995735e0.js.map